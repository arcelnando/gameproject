<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zaza AI</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<h1>Zaza AI</h1>
<div id="chatbox"></div>
<input type="text" id="userInput" placeholder="Ketik sesuatu..."/>
<button onclick="sendMessage()">Kirim</button>

<script>
async function sendMessage() {
    const input = document.getElementById('userInput');
    const chatbox = document.getElementById('chatbox');
    const userText = input.value.trim();
    if(!userText) return;

    // tampilkan pesan user
    const userMsg = document.createElement('div');
    userMsg.className = "message user";
    userMsg.textContent = "Kamu: " + userText;
    chatbox.appendChild(userMsg);
    input.value = '';
    chatbox.scrollTop = chatbox.scrollHeight;

    // tampilkan loading bot
    const botMsg = document.createElement('div');
    botMsg.className = "message bot";
    botMsg.textContent = "Zaza AI: sedang mengetik...";
    chatbox.appendChild(botMsg);
    chatbox.scrollTop = chatbox.scrollHeight;

    try {
        const res = await fetch("/chat", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ message: userText })
        });
        const data = await res.json();
        botMsg.textContent = "Zaza AI: " + data.reply;
        chatbox.scrollTop = chatbox.scrollHeight;
    } catch (err) {
        botMsg.textContent = "Zaza AI: Terjadi error saat menghubungi server";
        console.error(err);
    }
}
</script>
</body>
</html>
